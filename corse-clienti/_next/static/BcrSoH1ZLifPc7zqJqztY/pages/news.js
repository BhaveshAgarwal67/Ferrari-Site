(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{YLMp:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/news",function(){return a("xiWU")}])},xiWU:function(e,t,a){"use strict";var n=a("5Uuq"),s=a("KI45");a("hfKm")(t,"__esModule",{value:!0}),t.default=void 0;var r=s(a("pbKT")),i=s(a("htGi")),u=s(a("TbGu")),l=s(a("9Jkg")),o=s(a("ln6h")),c=s(a("eVuF")),f=s(a("v7Px")),d=s(a("6BQ9")),h=s(a("/HRN")),p=s(a("K47E")),g=s(a("WaGi")),w=s(a("N9n2")),v=s(a("ZDA2")),m=s(a("/+P4")),N=s(a("xHqa")),P=n(a("q1tI")),y=s(a("SbWC")),b=s(a("kQFM")),k=s(a("8Kt/")),C=a("nOHt"),S=a("eHHv"),L=a("T89o"),T=s(a("Nnea")),I=s(a("WZaA")),x=s(a("NZQk")),E=s(a("hzb8")),M=s(a("SHU5")),_=a("8ANe"),D=s(a("qyhG")),U=a("gGHL"),q=a("3Eu1"),H=a("mJQZ"),R=a("LXYO"),W=a("CX7h"),V=s(a("CFqB")),F=a("sd54"),G=a("X6sk"),K=s(a("9qRu")),X=a("Tzds"),Y=s(a("VHFN")),z=P.default.createElement;function J(e){var t=function(){if("undefined"===typeof Reflect||!r.default)return!1;if(r.default.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call((0,r.default)(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,m.default)(e);if(t){var s=(0,m.default)(this).constructor;a=(0,r.default)(n,arguments,s)}else a=n.apply(this,arguments);return(0,v.default)(this,a)}}var Q=function(e){(0,w.default)(a,e);var t=J(a);function a(e){var n;(0,h.default)(this,a),n=t.call(this,e),(0,N.default)((0,p.default)(n),"lastLoadedPage",0);var s=n.props.isServer;if(n.state={splash:s,featured:e.featured,news:e.news,fetchedNews:[],newsCategories:e.newsCategories,loadingInfinite:!0},404===(0,L.get)(e,"error.error.errorStatus",!1)){throw new Error((0,l.default)({message:"News page not found",status:404}))}return n}return(0,g.default)(a,null,[{key:"getInitialProps",value:function(e){var t,a,n,s,r,i,u,l,h,p,g,w;return o.default.async((function(v){for(;;)switch(v.prev=v.next){case 0:return t=e.store,a=e.query,n=e.isServer,e.res,s=[],r=(0,d.default)(a.pageNumber,10),s.push(D.default.page(a.locale,"news","news").then((function(e){var a=e.data;return t.dispatch((0,R.setChannelVariables)((0,L.get)(a,"results.variables",[]))),a.results})).catch((function(e){return(0,K.default)(e)}))),s.push(D.default.newsListing({locale:a.locale,channel:"corse-clienti",limit:V.default.newsPerPage,skip:(0,f.default)(r)?null:(r-1)*V.default.newsPerPage,categories:(0,G.getCategoryParams)(a),year:(0,G.getYearParams)(a),tags:(0,G.getTagParams)(a)}).then((function(e){return e.data.results}))),n&&(s.push(D.default.newsCategories({locale:a.locale}).then((function(e){return e.data.results}))),s.push(D.default.superheader(a.locale).then((function(e){return e.data.results})).then((function(e){var a=e.content;t.dispatch((0,U.setPillars)(a.pillars))})).catch((function(e){var a=(0,L.get)(e,"response.data",{});return t.dispatch((0,q.setError)(a)),{}}))),s.push(D.default.superfooter(a.locale).then((function(e){return e.data.results})).then((function(e){var a=e.content;t.dispatch((0,H.setFooterData)(a))})).catch((function(e){var a=(0,L.get)(e,"response.data",{});return t.dispatch((0,q.setError)(a)),{}})))),v.next=8,o.default.awrap(c.default.all(s));case 8:return i=v.sent,u=i[0],l=t.getState().locale.locale||"en",h=i[1].params.tags,p={},g="",w="",h.length>0&&(g="en"!==l&&""!==h[0].localization[l]?h[0].localization[l]:h[0].description,w=h[0].slug,p={name:g,slug:w}),t.dispatch((0,R.setChannelVariables)((0,L.get)(u,"variables",[]))),v.abrupt("return",{serverPage:r||1,listingPageNum:r||1,isServer:n,pageData:u,featured:(0,L.get)(i[1],"featuredItems",[]),news:(0,L.get)(i[1],"items",[]),newsCategories:i[2],activeTag:p,total:(0,L.get)(i[1],"total",0)});case 18:case"end":return v.stop()}}),null,null,null,c.default)}}]),(0,g.default)(a,[{key:"componentDidMount",value:function(){var e=this;this.lastLoadedPage=this.props.listingPageNum,setTimeout((function(){e.hideSplash()}),1e3)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.router.query,a=e.router.query;t.pageNumber!==a.pageNumber&&(this.lastLoadedPage=(0,d.default)(a.pageNumber,10)),(0,l.default)(this.state.news)===(0,l.default)(e.news)&&e.total===this.props.total||this.setState({news:e.news,fetchedNews:[],loadingInfinite:!0}),(0,l.default)(this.state.featured)!==(0,l.default)(e.featured)&&this.setState({featured:e.featured})}},{key:"getMicrodata",value:function(){var e=this,t={"@context":"https://schema.org","@type":"ItemList",itemListElement:[].concat((0,u.default)(this.props.featured),(0,u.default)(this.props.news)).map((function(t,a){var n="".concat(e.baseUrl,"/articles/").concat(t.slug);return{"@type":"ListItem",position:a+1,url:(0,L.get)(t,"content.isExternal",!1)?(0,L.get)(t,"content.externalLink",""):n}}))};return z((function(e){var t=e.data;return z("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:(0,l.default)(t)}})}),{data:t})}},{key:"fetchMoreNews",value:function(e){var t,a,n,s;return o.default.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.pageNumber,r.next=3,o.default.awrap(D.default.newsListing({locale:e.locale,channel:"corse-clienti",limit:V.default.newsPerPage,skip:(t-1)*V.default.newsPerPage,categories:(0,G.getCategoryParams)(e),year:(0,G.getYearParams)(e),tags:(0,G.getTagParams)(e)}));case 3:a=r.sent,n=a.data,s=[].concat((0,u.default)(this.state.fetchedNews),(0,u.default)((0,L.get)(n.results,"items",[]))),this.setState({fetchedNews:s,loadingInfinite:s.length!==this.state.fetchedNews.length});case 7:case"end":return r.stop()}}),null,this,null,c.default)}},{key:"hideSplash",value:function(){this.setState({splash:!1})}},{key:"navigateToNews",value:function(e,t,a,n){return e.preventDefault(),a&&n?(window.open(n,"_blank"),!1):(window.location.href="".concat(this.baseUrl,"/articles/").concat(t),!1)}},{key:"render",value:function(){var e=this,t=this.props,a=t.pageData,n=t.metadata,s=t.activeTag,r=t.total,l=[];this.props.listingPageNum>1&&l.push({rel:"prev",href:"".concat(this.baseUrl,"/news/").concat(this.props.listingPageNum-1)}),this.props.news.length&&l.push({rel:"next",href:"".concat(this.baseUrl,"/news/").concat(this.props.listingPageNum+1)});return z("div",null,z(k.default,null,z("title",null,(0,L.get)(a,"title","News")),n,l.map((function(e,t){return z("link",(0,i.default)({},e,{key:t}))}))),z(E.default,{visible:this.splashVisible}),z(M.default,null),this.getMicrodata(),z(_.Menu,{staticColor:!0}),z("div",{className:Y.default.newsWrapper},z(F.NewsPage,{channel:"corse-clienti",router:this.props.router,listingPageNum:this.props.listingPageNum,pageData:this.props.pageData,fetchMoreNews:function(t){return e.fetchMoreNews(t)},newsCategories:this.state.newsCategories,featured:this.state.featured,news:[].concat((0,u.default)(this.state.news),(0,u.default)(this.state.fetchedNews)),listingReveal:!this.state.splash,loadingInfinite:this.state.loadingInfinite,activeTag:s,total:r,footer:{referrer:(0,X.changeCountrySlug)(),origin:"CORSE_CLIENTI"}})))}},{key:"splashVisible",get:function(){return this.state.splash}},{key:"baseUrl",get:function(){var e=this.props.router;return(0,W.retrieveBaseUrl)()+e.asPath.split("/").slice(0,2).join("/")}}]),a}(P.Component),Z=(0,S.compose)((0,y.default)(b.default,(function(e){return{breakpoint:e.breakpoint,error:e.error}})),C.withRouter,I.default,x.default,T.default)(Q);t.default=Z}},[["YLMp",1,2,3,7,8,9,26,5,10,4,0,25,27,28,13]]]);