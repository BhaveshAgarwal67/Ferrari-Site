(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{"7rcV":function(e,t,n){"use strict";var a=n("KI45"),r=n("5Uuq");n("hfKm")(t,"__esModule",{value:!0}),t.default=void 0;var u=r(n("q1tI")),i=a(n("pbKT")),l=a(n("eVuF")),s=a(n("ln6h")),o=a(n("/HRN")),c=a(n("K47E")),d=a(n("WaGi")),f=a(n("N9n2")),p=a(n("ZDA2")),h=a(n("/+P4")),v=a(n("xHqa")),m=n("eHHv"),g=n("ANjH"),w=a(n("SbWC")),y=a(n("8Kt/")),S=n("T89o"),k=n("19JU"),b=a(n("kQFM")),N=a(n("qyhG")),P=a(n("9qRu")),H=(n("wY8V"),n("0vEF")),O=n("gGHL"),C=n("mJQZ"),E=(n("QyOH"),n("LXYO")),T=a(n("/tWa")),q=(a(n("tn3X")),a(n("DOE8"))),D=n("oTHJ"),I=a(n("s+xg")),F=a(n("Nnea")),_=a(n("WZaA")),A=a(n("NZQk")),J=a(n("hzb8")),x=a(n("SHU5")),L=(n("Fbiq"),n("rdom"),r(n("8ANe"))),Q=a(n("t3G4")),V=r(n("sd54")),W=u.default.createElement;function K(e){var t=function(){if("undefined"===typeof Reflect||!i.default)return!1;if(i.default.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call((0,i.default)(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,h.default)(e);if(t){var r=(0,h.default)(this).constructor;n=(0,i.default)(a,arguments,r)}else n=a.apply(this,arguments);return(0,p.default)(this,n)}}var U=function(e){(0,f.default)(n,e);var t=K(n);function n(e){var a;return(0,o.default)(this,n),a=t.call(this,e),(0,v.default)((0,c.default)(a),"scenes",[]),(0,v.default)((0,c.default)(a),"chapterWrappers",[]),a.state={activeOrigin:null},a}return(0,d.default)(n,null,[{key:"changeCountrySlug",value:function(){var e=k.window.location.pathname||"";return"/"!==e&&(e=(e=e.replace(/\/?([a-z]{2}-[A-Z]{2})?(.*)/,"$2")).replace("/corse-clienti","")),e}},{key:"shareSectionFullUrl",value:function(e){var t=String(k.window.location.pathname).split("/share")[0];return"".concat(t,"/share/").concat(e)}}]),(0,d.default)(n,[{key:"componentDidMount",value:function(){var e,t=this;return s.default.async((function(n){for(;;)switch(n.prev=n.next){case 0:(e=this.props.thronSessId).length>0&&q.default.setSessId(e),setTimeout((function(){t.hideSplash()}),1e3),this.setActiveOrigin();case 4:case"end":return n.stop()}}),null,this,null,l.default)}},{key:"componentWillUnmount",value:function(){this.chapterController&&this.chapterController.destroy(!0),window.removeEventListener("resize",this.setScenesDuration)}},{key:"setActiveOrigin",value:function(){this.setState({activeOrigin:T.default.findTree(this.props.menuPillars,window.location.href)})}},{key:"hideSplash",value:function(){this.props.setSplash(!1)}},{key:"render",value:function(){var e=this.props,t=e.title,a=e.metadata,r=e.pageData,u=e.query,i=e.openNewsletterForm,l=this.state.activeOrigin,s={};s=Q.default.setOrganismsMultiNaming(s,L),s=Q.default.setEditorialNaming(s,L.Editorial);var o=r.template||(0,S.get)(r,"commonProperties.internalNavigation","default"),c=Q.default.pageTemplate(o,V);return(0,S.isObject)(r.carHeader)&&(0,D.breakpointIsLessThan)("phone",this.props.breakpoint.size)&&(r.carHeader.logoPosition="left"),W("div",null,W(y.default,null,t,a),W(J.default,{autoVisibility:!0}),W(x.default,null),W(c,{pageData:r,blockTypes:s,dispatch:this.props.dispatch,templateName:o,menu:{activeOrigin:l,openNewsletterForm:i},footer:{referrer:n.changeCountrySlug(),origin:"CORSE_CLIENTI",token:u.token}}))}}]),n}(u.Component);(0,v.default)(U,"getInitialProps",(function(e){var t,n,a,r,u,i,o;return s.default.async((function(c){for(;;)switch(c.prev=c.next){case 0:return e.req,t=e.res,n=e.query,a=e.isServer,r=e.store,u=n.locale,i={},o=[],a&&(o.push(N.default.superheader(u).then((function(e){return e.data.results})).then((function(e){var t=e.content;r.dispatch((0,O.setPillars)(t.pillars))})).catch((function(e){return(0,P.default)(e)}))),o.push(N.default.superfooter(u).then((function(e){return e.data.results})).then((function(e){var t=e.content;r.dispatch((0,C.setFooterData)(t))})).catch((function(e){return(0,P.default)(e)})))),o.push(N.default.page(u,n.name,n.parent?"".concat(n.parent,"/").concat(n.name):n.name,n.accessCode,n.previewSlug,n.token).then((function(e){var n=e.data;(0,S.get)(n,"results.content.blocks")?(i=n.results,r.dispatch((0,E.setChannelVariables)((0,S.get)(i,"variables",[])))):(0,S.get)(n,"results.redirect")&&(t.writeHead(301,{Location:n.results.redirect}),t.end())})).catch((function(e){return(0,P.default)(e)}))),c.next=8,s.default.awrap(l.default.all(o));case 8:return r.dispatch((0,H.setSplash)(a)),c.abrupt("return",{locale:u,pageData:i,query:n,openNewsletterForm:"open"===n.newsletter,thronSessId:(0,S.get)(i,"commonProperties.videoPlayer.sessId","")});case 10:case"end":return c.stop()}}),null,null,null,l.default)}));var Z=(0,m.compose)((0,w.default)(b.default,(function(e){return{breakpoint:e.breakpoint,menuPillars:e.menu.pillars,hiddenHeader:e.menu.hidden}}),(function(e){return(0,g.bindActionCreators)({setSplash:H.setSplash},e)})),_.default,A.default,I.default,F.default)(U);t.default=Z},"QJP+":function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/scheda",function(){return n("7rcV")}])}},[["QJP+",1,2,3,7,8,9,26,5,10,4,0,25,27,28,29]]]);